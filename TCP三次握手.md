当一台客户端（Client）想要与一台服务器（Server）建立TCP连接时，需要经过三个步骤：

1. **SYN**：
    
    - 客户端向服务器发送一个`SYN`报文段（设置SYN标志位为1），并随机生成一个初始序列号`seq=x`。这表示客户端请求建立连接。
    
2. **SYN-ACK**：
    
    - 服务器收到`SYN`报文后，必须进行回应。它会：
        
        - 发送一个`SYN-ACK`报文段（SYN和ACK标志位均为1）。
            
        - 确认客户端的序列号，所以`ack=x+1`。
            
        - 自己也随机生成一个序列号`seq=y`。
            
    - **关键一步**：在发送完`SYN-ACK`之后，服务器会立即在内存中创建一个名为 **“半开连接”** 的条目，并将该连接放入 **“半连接队列”** 中。这个状态表示连接还未完全建立，正在等待客户端的最终确认。
        
3. **ACK**：
    
    - 客户端收到`SYN-ACK`后，再向服务器发送一个`ACK`报文段（ACK标志位为1），确认服务器的序列号，所以`ack=y+1`。
        
    - 至此，三次握手完成，连接建立成功。服务器将“半开连接”从队列中移出，并创建一个完整的连接，开始数据传输。